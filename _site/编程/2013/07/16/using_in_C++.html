<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<title>using声明与using指示</title>
<meta name="description" content="（摘录自Stanley B. Lippman等c++ primer人民邮电出版社英文版第四版，p723）">
<meta name="keywords" content="zhenghua, 邹政华, meiyueyibenshu, zou zhenghua">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="http://zhenghua.info/%E7%BC%96%E7%A8%8B/2013/07/16/using_in_C++.html">
<link rel="alternate" type="application/atom+xml" title="邹政华的随想录" href="http://zhenghua.info/zfeed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    processEscapes: true
  }
});
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});

$(document).ready(function(){
  $(".flip").click(
      function(){
        $(".panel").toggle(500);
      });
});
</script>


</head>


<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">邹政华的随想录</a></h1>
    <h3 class="site-meta">^o^</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">主页</a>
        
        
        
        <a class="page-link" href="/about/">关于我</a>
        
        
        
        <a class="page-link" href="/archives/">博客记录</a>
        
        
        
        <a class="page-link" href="/categories/">博客分类</a>
        
        
        
        <a class="page-link" href="/guestbook/">留言簿</a>
        
        
        
        
        
        
        
        <a class="page-link" href="/tags/">标签</a>
        
        
        
        <a class="page-link" href="/zfeed.xml">订阅</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="post">

  <header class="post-header">
    <h1 class="post-title">using声明与using指示</h1>
    <p class="post-meta">
    目录:
    
    <a href="/categories/#编程">编程</a>&nbsp;
     
    
    | 发表时间: Jul 16, 2013
    </p>
  </header>

  <article class="post-content">
    <p>（摘录自Stanley B. Lippman等c++ primer人民邮电出版社英文版第四版，p723）</p>

<p>using声明（using declaration）一次引入命名空间（namespace)中的一个成员,该成员的作用范围是从using声明点开始，直到包含该using声明的作用域结尾。声明的名字仅仅在该作用域是可见，外部作用域中相同的名字被屏蔽。using声明的格式是 “using namespace name::member name”, 如”using std::map”用来声明使用std命名空间中的map容器。</p>

<p>using指示（using directives)使得引入的命名空间中的所有成员可见。using指示的形式是“using namespace (namespace name)”,如“using namespace std”表示使用命名空间std。using指示可以出现在命名空间（namespace）、函数或者块（block）中，但不能用于类中（class scope）。</p>

<p>举个例子用来说明using声明和using指示的具体使用，考虑下面的代码样本：</p>

<pre><code>namespace exercise{
      int ivar = 0;
      double dvar = 0;
      const int limit = 1000;
}
      
int ivar = 0;
//position 1
      
void manip() {
      //position 2
      double dvar = 3.1416;
      int iobj = limit + 1;
      ++ivar;
      ++::ivar;
}
</code></pre>

<p>对于以上代码，如果命名空间exercise中所有成员的using声明放在标记position 1的地方，则exercise中的成员在全局作用域中可见。using exercise::ivar会导致ivar重复定义，引起编译错误；函数manip()中的double dvar = 3.1416声明一个局部的变量dvar,在函数体作用域内它将屏蔽exercise::dvar。</p>

<p>如果命名空间exercise中所有成员的using声明放在标记position 2的地方，则函数manip() 中的double dvar=3.1416是对dvar的重复定义，会引起编译错误；++ivar是对exercise中的ivar加1，++::ivar访问的是全局变量ivar。</p>

<p>如果命名空间exercise的using指示放在标记position 1的地方，则manip中的double dvar  = 3.1416声明了一个局部的变量dvar，在函数体作用域内屏蔽exercise::dvar；++ivar访问的是exercise::ivar，++::ivar访问的是全局变量ivar。</p>

<p>如果命名空间exercise中的using指示放在标记position 2的地方，则exercise中的成员看来好像是声明在全局作用域中一样，manip中的double dvar=3.1416，声明了一个局部变量dvar，在函数体中它将屏蔽exercise::dvar；++ivar出现二义性错误，编译器无法分辨是访问exercise::ivar，还是访问全局变量ivar，而++::ivar访问的是全局变量ivar。</p>

  </article>
  <hr />
</div>


<section class="pager">
  <ul>
    
    <li class="previous"><a href="/%E8%AF%BB%E4%B9%A6/2013/05/01/jiu_pin_zhong_zheng_zhi_du.html" title="九品中正制">&larr; 前一页</a></li>
    
    
    <li class="next"><a href="/%E7%BC%96%E7%A8%8B/2013/07/22/inheritation_and_using_in_C++.html" title="继承和使用声明">后一页 &rarr;</a></li>
    
  </ul>
</section>

<!-- <div id="disqus_thread"></div> -->

<!-- 多说评论框 start -->
<div class="ds-thread"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"zhenghua"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



    <section class="pager">
  
  
</section>


  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>关于我</h4>
  <img title="Lijia YU" src="https://i.imgur.com/Mdc4szJl.jpg" alt="Lijia YU"/>
  <span>Hi,我是邹政华，欢迎访问我的博客。</span>
  <br />

  

  微信号:692266086 


  

</div>

<div class="sidebar-module">
  <h4>近期文章</h4>
  
  <li>
  <a href="//%E8%AF%BB%E4%B9%A6/2015/02/16/yi_shui_bei_ge.html" title="易水悲歌" rel="bookmark">易水悲歌</a>
  </li>
  
  <li>
  <a href="//%E8%AF%BB%E4%B9%A6/2015/01/02/editor_notes_for_meiyueyibenshu_2014.html" title="编者按合辑(一)" rel="bookmark">编者按合辑(一)</a>
  </li>
  
  <li>
  <a href="//%E7%BC%96%E7%A8%8B/2014/12/27/move_blog_to_jekyll.html" title="使用jekyll和markdown写作博客" rel="bookmark">使用jekyll和markdown写作博客</a>
  </li>
  
  <li>
  <a href="//%E8%AF%BB%E4%B9%A6/2014/11/09/shi_liu_guo_bei_chao.html" title="十六国北朝－无序的车辙" rel="bookmark">十六国北朝－无序的车辙</a>
  </li>
  
  <li>
  <a href="//%E6%80%BB%E7%BB%93%E4%B8%8E%E9%81%90%E6%83%B3/2014/10/06/thoughts_3.html" title="遐想（三）" rel="bookmark">遐想（三）</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>分类目录</h4>
  
  <li><a href="/categories/#总结与遐想" title="总结与遐想" rel="14">总结与遐想 (14)</a></li>
  
  <li><a href="/categories/#行业观察" title="行业观察" rel="1">行业观察 (1)</a></li>
  
  <li><a href="/categories/#编程" title="编程" rel="15">编程 (15)</a></li>
  
  <li><a href="/categories/#读书" title="读书" rel="15">读书 (15)</a></li>
  
</div>


<div class="sidebar-module">
  <h4>存档</h4>

  
  
  
  
  
  <li id="2015" > <a href="/archives/#2015">2015</a></li>
  
  
  
  
  
  
  
  
  
  
  <li id="2014" > <a href="/archives/#2014">2014</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2013" > <a href="/archives/#2013">2013</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2012" > <a href="/archives/#2012">2012</a></li>
  
  
  
  
  
  
  
  
  
  
  <li id="2010" > <a href="/archives/#2010">2010</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2009" > <a href="/archives/#2009">2009</a></li>
  
  

</div>


</div>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">邹政华的随想录</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> 
  on 
  
  <a href="https://github.com/">Github</a>
  
  | Theme <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Design by <a href="http://yulijia.net">Lijia Yu</a>  

</footer>


</div>

</body>

</html>
