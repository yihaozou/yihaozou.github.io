<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<title>学习笔记</title>
<meta name="description" content="Read Think Create.">
<meta name="keywords" content="zhenghua, 邹政华, meiyueyibenshu, zou zhenghua">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="http://zhenghua.info/">
<link rel="alternate" type="application/atom+xml" title="学习笔记" href="http://zhenghua.info/zfeed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    processEscapes: true
  }
});
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});

$(document).ready(function(){
  $(".flip").click(
      function(){
        $(".panel").toggle(500);
      });
});
</script>


</head>


<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">学习笔记</a></h1>
    <h3 class="site-meta">slow is fast.</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">主页</a>
        
        
        
        <a class="page-link" href="/about/">关于我</a>
        
        
        
        <a class="page-link" href="/archives/">写作记录</a>
        
        
        
        <a class="page-link" href="/categories/">文章分类</a>
        
        
        
        <a class="page-link" href="/guestbook/">留言簿</a>
        
        
        
        
        
        
        
        <a class="page-link" href="/tags/">标签</a>
        
        
        
        <a class="page-link" href="/zfeed.xml">订阅我</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="home">
  <div class="post">
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%A1%8C%E4%B8%9A/2016/07/13/Benchmarking_netflix_dynomite.html">Netlix Dynomite性能基准测试，基于AWS和Redis</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#行业">行业</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#Dynomite" title="Dynomite">Dynomite </a>
      
      
      | 发表时间: Jul 13, 2016
      </p>
    </header>

    <article class="post-content">
      <p>去年，Netflix云数据库(CDE)团队推出了<a href="http://techblog.netflix.com/2014/11/introducing-dynomite.html">Dynomite</a>。Dynomite是一个代理层，旨在将任意非分布式的数据库转化为分片、多区域的分布式数据库系统。Dynomite提供高可用性，通过<a href="http://techblog.netflix.com/2013/12/active-active-for-multi-regional.html">Active-Active</a>设置，即便AWS中整个region失效了，仍然能够正常工作。</p>

<p>Netflix已经在生产系统里部署了Dynomite。在系列博客文章中，Netflix详细描述了Dynomite的使用场景和特性。例如在<a href="http://techblog.netflix.com/2016/01/dynomite-with-redis-on-aws-benchmarks_14.html">第一篇</a>里，我们可以了解Dynomite帮助Redis在AWS上线性扩展的细节。</p>

<p>Dynomite能够将最终一致性(eventual consistency)扩展为<a href="https://github.com/Netflix/dynomite/wiki/Consistency">协调一致性</a>(tunable consistency)。使用DC_ONE模式，读写行为在local Availability Zone(AZ)下是同步的；使用DC_QUORUM模式，本地区域特定数量结点下的操作是同步的。</p>

<p>由测试得到的结果，Dynomite能从3，6，12，24一路扩展到48个节点，在DC_ONE和DC_QUORUM模式下，吞吐率都能线性地增长。与此同时，Dynomite在延迟方面只增加了很少的开支，即便在DC_QUORUM模式下，(延迟)也只有几毫秒。DC_QUORUM模式在延迟和吞吐量方面处于劣势，但是能为客户提供更好的读写保证。</p>

<p>最后，Dynomite也支持Redis<a href="http://redis.io/topics/pipelining">管道</a>，能够批量地处理请求，从而提升高达50%的性能。Dynomite通过提升吞吐量来减少延迟，从用户的角度讲，这是具有现实意义的。</p>

<p>该<a href="http://techblog.netflix.com/2016/01/dynomite-with-redis-on-aws-benchmarks_14.html">博客系列</a>的下一篇文章，是关于Dynomite中的逆熵处理问题，以及如何获取更好的一致性。</p>

    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E4%B9%A6%E6%91%98/2016/06/28/politics_and_novels.html">政治和文学-书摘</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#书摘">书摘</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#随笔" title="随笔">随笔 </a>
      
      
      | 发表时间: Jun 28, 2016
      </p>
    </header>

    <article class="post-content">
      <p>一般来说，人们说某本小说“重要”，是因为它抨击了社会现状，或者说它引入了某种技巧上的创新。</p>

<p>佩剑的人会死于剑，没佩剑的人会死于疾病</p>

<p>文明而安全的生活的一个后果是，人们会过度敏感，这会使所有主要的感情显得可恶。慷慨跟吝啬一样让人难受，知恩图报与忘恩负义同样招人恨。</p>

<p>将工厂国有化，取缔教会，颁布革命的命令，并不能使军队更有战斗力。(西班牙)法西斯之所以能赢，是因为他们拥有现代化的武器，而政府军没有。任何政治策略都解决不了这个问题。</p>

<p>在我们这个时代，政治演讲与政治写作多半是在为不可辩护的东西做辩护。对英国继续在印度实行殖民统治、俄国的清洗和流放、在日本扔原子弹这类事情，的确可以辩护，但是，辩护所用的论据，必定是极端残忍，以至于绝大多数人无法面对，并且是跟正当所宣示的目的是不相符合的。所以，政治语言不得不主要由委婉式、祈求问题式和纯属云山雾罩式的说法组成。</p>

<p>托尔斯泰跟李尔王更深层次的相似之处在于，他们都是出于错误的动机，也没有得到所希望的生活。在托尔斯泰看来，每个人生活的目的，是追求幸福，而要得到幸福，只有按上帝的要求去做。但是按照上帝的要求去做事，就意味着要弃绝一切人间的快乐和野心，只为他人而活着。</p>

<p>假如你的这边脸挨了打，你又把那边脸转过去，就会受到更猛烈的一击。并不一定总是如此，但你应该预计到这种情况，而且当它真的发生时，你也不该抱怨。你挨的第二次击打，是你把那边脸转过去这一行为本身的一部分。</p>

<p>这些戏剧都首先以人道主义的假定开始，即生活尽管充满痛苦，仍然值得一活。</p>

<p>绝大多数人都从生活中得到不少乐趣，但总的来说，生活是痛苦的，只有年轻人或者极愚蠢的人才不这么看。</p>

<p>通观他的剧作，凡是尖锐批评社会的人，凡是不受通行的谎言所欺骗的人，不是小丑，就是恶棍疯子，或者是装疯卖傻的人，再不就是处于癫狂状态的人。</p>

<p>如果你待在正在沉没的船上，那你的思想必定会围着沉船打转。</p>

<p>所有的圣人，在被证明清白之前，都应当被判定为有罪</p>

<p>在对甘地这样的人进行评判的时候，人们往往会不自觉地适用较高的标准，以至于忽视了他的一些优点</p>

<p>判定文学作品的高下，除了看它流传时间的长短，没有任何别的标准－－流传的时间本身，就是反映多数人意见的指标。</p>


    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%A1%8C%E4%B8%9A/2016/06/21/Build_your_own_offshore_develop_team.html">为什么应该租赁而不是创建离岸团队</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#行业">行业</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#经营" title="经营">经营 </a>
      
      
      | 发表时间: Jun 21, 2016
      </p>
    </header>

    <article class="post-content">
      <p>关于离岸开发中心的运用，有几篇文章提到”拥有”比”租赁”更具优势。平心而论，这些文章写得不错，但是我并不赞成创建自己的开发中心要优于外包的观点。我在圣迭戈拥有外包公司以及附属的两个离岸开发中心，说“租赁”更好有屁股决定脑袋的嫌疑，所以澄清一下，这么说并非出于推销服务的目的，实在是因为成立离岸开发中心比想象中要困难。</p>

<p>将软件开发工作转移到海外，并不意味着一定要创建自己的开发中心。一般来说，在海外寻求四五十人规模的开发团队，务实的做法是花一二年时间去调研，外包然后维护，只需要按照流程不出纰漏就好了。但是对于那些要从头创建离岸团队的人来说，特别需要注意：这是在创建一个跨国公司，必然要碰到与之相关的法律，税收，基础设施等各种问题。</p>

<p>多数情况下，针对不同规模的企业，合适的外包伙伴意味着更少的风险、更高的效率和质量，也可以节省时间和配套设施。这可以理解为另一种形式的“云”，为什么要单独建立自己的电塔呢？为什么为了开汽车而去发掘石油呢？用现有的设施就好了！接下来我会分别说明外包开发团队相较于自己创建团队的几项优势。</p>

<h3 id="section">投资</h3>

<p>使用海外开发测试人员以及削减成本时，业内有“garbage in, garbage out”的说法。我们向其他大陆的开发中心投入资源（“垃圾”），结果吃惊地发现出来的并不是定制化的产品。或者我们雇佣了当地的优秀开发人员，沾沾自喜之余，却发现六个月后，他通过外国人工作签证离职去了微软。</p>

<p>在外包开发中，作为客户和企业我都有切身的体验。有一些客户因为商务联系、现有基础设施以及独特的文化背景，建立自己的开发中心相对容易。但是这并不典型，实际情况是：</p>

<ul>
  <li>许多企业没有很强的海外联系；</li>
  <li>许多企业无力在海外创建品牌，基础设施以及进行人力资源管理，尤其是那些小公司或创业公司；</li>
  <li>许多企业试图减少管理相关的工作，将精力集中在代码质量、app、产品和性能上；</li>
  <li>多数企业运营海外设施时会付出额外的管理费用，而且维护这些设施复杂、昂贵、消耗时间；</li>
  <li>多数企业想避免复杂、风险和节省时间，但是如果创建自己的开发中心的话，这些是无法避免的。</li>
</ul>

<p>创建自己的海外开发中心需要格外关注以上提及的五个方面。解决这些问题困难、琐碎并且花费不菲。我感同身受，因为这就是我的日常工作：提供人力给创业公司和中小企业，帮助他们解决宽带、人力、质量之类的问题。</p>

<p>我有两个离岸开发中心，并成立了公司去管理它们，员工们（超过130人）通过不同方式当天向我汇报。我们是个完整的公司，有专业的团队，业务扩展到了圣迭戈、阿曼和开罗。</p>

<p>客户可能在技能和人力上存在不足，我们将自己的团队集成进去，提升他们的能力。需要指出的是，我们并不是二流的团队，或者处于配合地位。我们是一流的，员工的技能和产出达到甚至超出客户的最好水平。</p>

<p>后面我会详细的解释如何吸引和留住这些高水平的员工（其实并不容易）。</p>

<p>但是我更想强调的是，客户应该利用海外人才的优势而不用承担背后的负担。除非他们本身是这方面的专家，在海外拥有公司，不然创建开发中心的劣势是全方位的。通过与我们的合作，客户可以减少许多麻烦。</p>

<h3 id="section-1">基础设施</h3>

<p>上个月，我们位于开罗的办公罗收到一笔物业账单，250000美元。显然，物业公司认为我们钱没有给够。谈判过程开始后，出现了律师、文件、政治在内的各种问题。我是怎么解决的呢？跟创建海外开发中心碰到的其他问题一样，委托给了一个顶级的人力资源和法律团队，该团队熟谙竞争对手、规则以及业务。整个过程对我们而言很痛苦，却是开展业务不得不考虑的因素。客户感觉不到这些，他们接触的是我们的人力、高质量的代码、优秀的团队协作以及靠谱的承诺。若是硅谷的创业公司，突然遇到这类问题，可能就认栽了。</p>

<p>还有个例子。我的朋友，开了很多公司，有一家在墨西哥，曾经碰到了很有意思的问题。在边境南端，他的公司因为涉嫌故意不向“住户”提供足够的停车位而被开出120万美元的罚单。但问题的关键是，该项业务是处理50英亩的墓地，墓地也需要“停车位”。这是要丧尸出笼么？最终我的朋友通过当地的合作伙伴将罚款降低4000美元（不得不承认这很聪明）。这类问题除了带来潜在的风险外，也很容易分散注意力，以及可能的工期延误。</p>

<p>总体来说，国际规则、承诺、税法以及商业法，往轻了说是非常复杂，往重了说关系业务的生存。</p>

<h3 id="section-2">品牌</h3>

<p>（在建立外包团队时）不能指望随便走进当地的酒吧，就能找到合适的优秀工程师。首先，你的品牌得根植于当地的环境和文化，取得潜在员工的信任。当然，如果你自己熟悉或者来自当地，这个过程会简单些。然而，大部分人都不具备这个条件，即便具备了（比方说我），仍然有很长的路要走。建立品牌花费巨大，不仅包括广告和时间成本，还有雇佣不到合适员工的机会成本。</p>

<p>我的第一个外包开发中心设立于约旦安曼，我在当地有深厚的人脉，仍然很难招聘和留住合适的员工。</p>

<p>我的第二个开发中心设立于埃及开罗，开罗和安曼差不多隔了圣迭戈和旧金山的距离。虽然我自己来自并且活跃于这个地区，在成立开发中心亮出招牌时，仍然没有顶级的工程师应聘，一个也没有，只有一些差强人意的候选人。你可能会问为什么？其实在一些欠发达的经济体，稳定的工作机会非常有限，有家室拖累的开发人员很少愿意跳槽，除非确定新的工作机会稳定、有合理的经济回报以及上升预期。发展中国家的雇员们见惯了“明星”企业带着资金和愿景过来，然后又开始打退堂鼓的现象，如此这般，他们也变得精明和谨慎起来。，我们需要时间和资源，来建立能够吸引顶级工程师的招聘品牌，从而满足不同层次客户的需求。</p>

<p>建立招聘品牌非常重要，但是既不容易也不便宜。大多数情况下，最开始你都不知道目标国家的位置和地理，也没有时间和人手去布置展位或者去大会演讲，只好干等一到两年去获取人力市场的信任。</p>

<p>花费不仅仅是在市场推广方面，也包括基础设施的投入。举个例子，在开罗创建开发中心的时候，我估计一层楼就可以装下所有员工，但是我仍然租用了整个四层办公楼。我这么做只不过是为了向过来面试的候选人展示留在当地的决心，以及公司未来的扩展规模。（按照我的经验和务实的估计，即便在像班加罗尔这样的地方开设外包研发中心，花一年时间去招聘，最终只能招聘到四五人）。</p>

<h3 id="section-3">吸引和留住人才</h3>

<p>海外开发团队成功的关键是能够吸引和留住人才。理解当地的文化，尊重当地团队，用同样标准去运营海外团队，以及为工程师提供激励。</p>

<p>针对最后一项工程师激励。提升产品质量，需要多样化的开发测试团队。有人负责解决棘手的问题，有人负责重构和解决错误，有人负责选用合适的协议和文档规范，诸如此类的。与之对应，有人想要物质奖励，有人想要丰厚的年终奖金，额外一周的假期，或者商务度假性质的旅行等等。你得明白，没有一揽子的解决方案，不能依靠“棒棒糖”来打造伟大的团队。但是如果将团队管理委托给第三方，并且合作方靠谱的话，就可以节省很多精力，何乐而不为呢？</p>

<p>作为个体和团队成员，员工需要关心和呵护。这意味着，运营海外开发团队时，也需要有配套的人力资源管理、福利、财务、法律、设施。在硅谷，创业公司或者SMB中流行将支持性的工作委托给专业公司或者直接外包，那么在使用海外开发中心时就更没有必要亲自创建运营了。</p>

<h3 id="section-4">机构，外包，第三方</h3>

<p>并非所有的企业或者合作伙伴使用同样的方式管理员工、团队以及客户关系。多数企业会指定项目经理。我们提供的开发团队，会完全集成到客户的团队，具体的工作方式可以参见<a href="http://www.integrant.com/team/tech2tech-structure/">另一篇文章</a>。</p>

<h3 id="section-5">另一种选择</h3>

<p>没有必要从头创建海外开发中心，最好避免这种情况。然而，选择合适的海外开发合作伙伴也很重要。 不谦虚地讲，我自己的公司就不错。</p>

<p>举个例子，有个老客户，曾经是某大型电子商务公司技术部门负责人，他一直有个不错的想法，并为此离了职去创业，工程相关的工作包括最新的app和插件。他第一时间找到我们，相信我们能够帮他组建团队、实现他的想法，虽然这次已不是原来电商公司的团队。</p>

<p>我们带他飞到埃及，参观我们的开发中心，面见团队成员。在那里他待了两个星期，之后除了发邮件感谢我们的款待外，还建议我们为他组建一个团队。他亲手挑选了那些自我驱动、勤奋、有想法的团队成员，接下来就不用再为亲手创建和维护海外开发中心而头痛。</p>

<h3 id="section-6">不可承受之失败</h3>

<p>百分之九十的创业公司会失败，创业者必须集中精力让自己的产品与众不同并且不犯错误。对大多数创业公司而言，从头创建海外开发中心是作死的行为。到时候，你一定会被团队选择、文化差异、沟通、妥协、规则搞得喘不过气来，这些本来是可以避免的。</p>

<p>就我自己而言，宁愿选择一家信得过的公司外包。这也是我们公司努力的方向。</p>

<h3 id="section-7">关于作者</h3>

<p>Yousef Awad毕业于加州大学圣迭戈分校，获信息系统科学学士学位，在可定制软件开发行业浸淫20多年，拥有编程、数据库管理和项目管理等领域丰富的经验。Yousef 1997年加入Integran公司，Integrant专注于定制化的软件开发，为客户提供外包团队、IT项目管理服务等。Integrant在阿曼、约旦和埃及开罗拥有开发中心，雇佣了全职员工130名。工作之外，Yousef投入了大量的精力向青少年普及编程知识，让他们获得来自工业界的编程指导。</p>

    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%A1%8C%E4%B8%9A/2016/05/07/oracle_openjdk_cleanup_of_unsafe_class.html">Java 9发布在即, Oracle着手清理Unsafe类</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#行业">行业</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#java" title="java">java </a>
      
      
      | 发表时间: May 7, 2016
      </p>
    </header>

    <article class="post-content">
      <p>( <a href="http://www.infoq.com/cn/news/2016/05/29">原文</a>和英文原文<a href="https://www.infoq.com/news/2016/02/29">Oracle’s OpenJDK Cleanup of “Unsafe” Implementation</a>发布于infoq.)</p>

<p>java 9正式版预计在2017年2季度发布，目前大部分JEP已经基本成型。其中，最关键特性或许是<a href="http://openjdk.java.net/jeps/261">JEP 261</a>, 该JEP实现了java平台的模块系统, 具体说明可以参见<a href="http://openjdk.java.net/projects/jigsaw/spec/">JSR376</a>。 模块系统依赖于<a href="http://openjdk.java.net/jeps/260">JEP260</a>（封装了大部分内部API），导致的结果是<a href="http://openjdk.java.net/jeps/193">JEP193</a>定义的多个句柄会暴露sun.misc.Unsafe类的功能。此前Info<a href="http://www.infoq.com/news/2015/07/oracle-plan-remove-unsafe">报道</a>过致力于解决sun.misc.Unsafe句柄问题的团队，可能的解决方案细节亦可参见<a href="http://www.infoq.com/articles/A-Post-Apocalyptic-sun.misc.Unsafe-World">另一篇报道</a>。 </p>

<p><a href="https://bugs.openjdk.java.net/browse/JDK-8149159">Bug 8149159</a>最近被提交到JDK Bug管理系统, 建议优化和清理Unsafe类, 包括将参数检查从本地代码移入Java（简化JIT）、 sun.misc.Unsafe类和jdk.internal.misc.Unsafe类的统一、 以及本地代码的整体清理。</p>

<p>2月18日，Oracle工程师Mikael Vidstedt向OpenJDK开发者社区提交了两个补丁（分别针对OpenJDK和OpenJDK HotSpot VM）  </p>

<p>关于这两个补丁，Vidstedt总结道：</p>

<ul>
  <li>避免代码重复，sun.misc.Unsafe将全部实现委托给jdk.internal.misc.Unsafe，这意味着java虚拟机(特别是unsafe.cpp）不再需要关心s.m.Unsafe的实现。 </li>
  <li>s.m.Unsafe的委托方法通常会被内联，但是为了避免性能下降的风险，仍然添加了@ForceInline注解 </li>
  <li>更新文档，指明用户应该确保Unsafe类的参数正确 </li>
  <li>参数检查从Unsage.cpp移入java，简化本地代码以及允许JIT进一步优化</li>
  <li>放松了特定参数的检查，比方说最近引入的U.copySwapMemory没有检查空指针。具体原因可以参考j.i.m.U.checkPointer的文档。除了U.copySwapMemory，现在Unsafe类方法也都没有对参数执行NULL检查 </li>
  <li>在U.copySwapMemory类的基础上，对j.i.m.U.copyMemory增加了一个测试案例。请随时提醒我合并过来（本该如此）  </li>
</ul>

<p>在Vidstedt看来，Usage类的清理算是“相当激进”了，值得注意的地方有：  </p>

<ul>
  <li>
    <p>Unsafe_方法以及unsafe.cpp中的其他本地方法被申明为静态方法  </p>
  </li>
  <li>新增unsafe.hpp代码文件，文件中移入VM其他组件的一些方法。移除部分“extern”函数声明（不要过度使用extern）  </li>
  <li>对于不怎么用到的UNSAFE_LEAF，移除警告性质的注释（没有必要，只是个VM_LEAF） </li>
  <li>一些简单的leaf方法使用UNSAFE_LEAF  </li>
  <li>UNSAFE_ENTRY/UNSAFE_END代码块新增大括号，帮助自动缩进</li>
  <li>移除未使用的Unsafe_&lt;…&gt;##140形式的函数和宏 </li>
  <li>更新宏参数，与unsafe.cpp的宏定义保持一致</li>
  <li>更换带断言的参数检查，正如前面提及，这些检查移入了j.i.m.Unsafe，移除所有s.m.Unsafe相关的代码</li>
</ul>

<p>查看英文原文：<a href="https://www.infoq.com/news/2016/02/29">Oracle’s OpenJDK Cleanup of “Unsafe” Implementation</a></p>

    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%AF%BB%E4%B9%A6/2016/02/20/well_grounded_java_developer.html">Java程序员修炼之道－性能调优</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#读书">读书</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#Java" title="Java">Java </a>
      
      
      | 发表时间: Feb 20, 2016
      </p>
    </header>

    <article class="post-content">
      <p>性能评估的几个指标:等待时间(latency), 吞吐率(throughput), 利用率(utilization)， 效率(efficiency), 容量(capacity), 扩展性(scalability), 退化(degradation)，这里的退化指的是在不增加资源的情况下，增加工作单元或客户端，一般等待时间或吞吐量都会发生变化。</p>

<p>在优化之前需要考虑的几个问题：</p>

<ul>
  <li>你正在测量的代码有哪些可观测的环节</li>
  <li>如何测量那些可观测环节</li>
  <li>这些可观测环节的目标是什么</li>
  <li>你怎么判断性能调优是否做好了</li>
  <li>性能调优可接受的最大支出是多少（投入的时间和增加的代码复杂度）</li>
  <li>在优化过程中，哪些东西是不能舍弃的</li>
</ul>

<p>需要对目标有清醒的认识并理解它们的价值，能达成性能目标的90%通常就够了，可以利用节省下来的时间去做些别的事。将大量精力投入到极少用到的代码路径上，通过优化代码来减少程序运行时长的1%，完全是在浪费时间。</p>

<p>程序优化的一些原则：</p>

<ul>
  <li>优化那些重要，而不是最容易的代码</li>
  <li>首先优化那些最重要（通常是调用最频繁）的方法</li>
  <li>在遇到那些唾手可得的优化时，把它办了，但要清楚代码的调用频率</li>
  <li>如果再也不需要调试日志，就去掉它</li>
  <li>可能不是代码导致等待时间过长，环境中其他部分也会产生等待时间</li>
  <li>最后再做一轮测量工作，以评估优化结果</li>
</ul>

<p>性能可能会付出的代价</p>

<ul>
  <li>占用开发人员的时间</li>
  <li>引入额外的技术复杂度</li>
  <li>为了让主线程运行得更快，可能会引入额外得线程来执行辅助任务，但这些线程可能会再负载较高时对系统整体产生不可预料得影响。</li>
</ul>

<p>过早优化是万恶之源</p>


    </article> <hr />
    
    
  
  </div>
</div>

    <section class="pager">
  
  
  <li class="next"><a href="/page2/" title="前一页">前一页 &rarr;</a></li>
  
</section>


  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>关于我</h4>
  <img title="Lijia YU" src="https://i.imgur.com/Mdc4szJl.jpg" alt="Lijia YU"/>
  <span>Hi,我是邹政华，欢迎访问我的博客。</span>
  <br />

  



  

</div>

<div class="sidebar-module">
  <h4>近期文章</h4>
  
  <li>
  <a href="/%E8%A1%8C%E4%B8%9A/2016/07/13/Benchmarking_netflix_dynomite.html" title="Netlix Dynomite性能基准测试，基于AWS和Redis" rel="bookmark">Netlix Dynomite性能基准测试，基于AWS和Redis</a>
  </li>
  
  <li>
  <a href="/%E4%B9%A6%E6%91%98/2016/06/28/politics_and_novels.html" title="政治和文学-书摘" rel="bookmark">政治和文学-书摘</a>
  </li>
  
  <li>
  <a href="/%E8%A1%8C%E4%B8%9A/2016/06/21/Build_your_own_offshore_develop_team.html" title="为什么应该租赁而不是创建离岸团队" rel="bookmark">为什么应该租赁而不是创建离岸团队</a>
  </li>
  
  <li>
  <a href="/%E8%A1%8C%E4%B8%9A/2016/05/07/oracle_openjdk_cleanup_of_unsafe_class.html" title="Java 9发布在即, Oracle着手清理Unsafe类" rel="bookmark">Java 9发布在即, Oracle着手清理Unsafe类</a>
  </li>
  
  <li>
  <a href="/%E8%AF%BB%E4%B9%A6/2016/02/20/well_grounded_java_developer.html" title="Java程序员修炼之道－性能调优" rel="bookmark">Java程序员修炼之道－性能调优</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>分类目录</h4>
  
  <li><a href="/categories/#读书" title="读书" rel="36">读书 (36)</a></li>
  
  <li><a href="/categories/#行业" title="行业" rel="4">行业 (4)</a></li>
  
  <li><a href="/categories/#总结与遐想" title="总结与遐想" rel="9">总结与遐想 (9)</a></li>
  
  <li><a href="/categories/#编程" title="编程" rel="10">编程 (10)</a></li>
  
  <li><a href="/categories/#书摘" title="书摘" rel="1">书摘 (1)</a></li>
  
</div>


<div class="sidebar-module">
  <h4>存档</h4>

  
  
  
  
  
  <li id="2016" > <a href="/archives/#2016">2016</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2015" > <a href="/archives/#2015">2015</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2014" > <a href="/archives/#2014">2014</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2013" > <a href="/archives/#2013">2013</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2012" > <a href="/archives/#2012">2012</a></li>
  
  
  
  
  
  
  
  

</div>


</div>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">学习笔记</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> 
  on 
  
  <a href="https://github.com/">Github</a>
  
  | Theme <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Design by <a href="http://yulijia.net">Lijia Yu</a>  

</footer>


</div>

</body>

</html>
