<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<title>学习笔记</title>
<meta name="description" content="Read Think Create.">
<meta name="keywords" content="zhenghua, 邹政华, meiyueyibenshu, zou zhenghua">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="http://zhenghua.info/page6/">
<link rel="alternate" type="application/atom+xml" title="学习笔记" href="http://zhenghua.info/zfeed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    processEscapes: true
  }
});
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});

$(document).ready(function(){
  $(".flip").click(
      function(){
        $(".panel").toggle(500);
      });
});
</script>


</head>


<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">学习笔记</a></h1>
    <h3 class="site-meta">slow is fast.</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">主页</a>
        
        
        
        <a class="page-link" href="/about/">关于我</a>
        
        
        
        <a class="page-link" href="/archives/">写作记录</a>
        
        
        
        <a class="page-link" href="/categories/">文章分类</a>
        
        
        
        <a class="page-link" href="/guestbook/">留言簿</a>
        
        
        
        
        
        
        
        <a class="page-link" href="/tags/">标签</a>
        
        
        
        <a class="page-link" href="/zfeed.xml">订阅我</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="home">
  <div class="post">
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%AF%BB%E4%B9%A6/2014/08/21/lin_dynamic_proxy.html">林信良Java学习笔记－动态代理</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#读书">读书</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#Java" title="Java">Java </a>
      
      
      | 发表时间: Aug 21, 2014
      </p>
    </header>

    <article class="post-content">
      <p>反射API中提供动态代理相关类, 可让你不必为特定接口操作特定代理对象. 使用动态代理机制，可使用一个处理者(Handler)代理多个接口的操作对象。</p>

<p>处理者必须操作java.lang.reflect.InvocationHandler接口,比方说我们要设计一个LoggingHandler类:</p>

<pre><code>import java.lang.reflect.*;
import java.util.logging.*;

public class LoggingHandler implements InvocationHandler{
	private Object target;
	public Object bind(Object target){
		this.target=target;
		return Proxy.newProxyInstance(
			target.getClass().getClassLoader(),
			target.getClass().getInterfaces(),
			this
		);
	}
}

public  Object invoke(Object proxy, Method method, Object[] args) throws Throwable{
	Object result=null;
	try{
		//  自定义的代码
		//  ...
		result = method.invoke(target, args);
	}catch(IllegalAccessException | IllegalArgumentException){
		log(e.toString);
	} 
} 
</code></pre>

<p>主要概念时使用Proxy.newProxyInstance()方法建立代理对象,调用时必须制定类加载器, 告知要代理的接口, 以及接口上定义方法被调用时的处理者(InvocationHandler实例). Proxy.newProxyInstance方法底层会使用原生(Native)方式生成代理对象的Class实例, 并利用它来生成代理对象, 代理对象会操作指定要代理的接口。</p>

<p>如果操作Proxy.newProxyInstance()返回的代理对象, 在每次操作时会调用处理器(InvocationHandler实例)invoke方法, 并传入代理对象、被调用方法的method实例于参数值.可以在invoke()方法中添加日志或其他自定义的功能。</p>

<p>驱动程序：</p>

<pre><code>public class ProxyDemo{
	public static void main(String[] args){
		LoggingHandler loggingHandler = new LoggingHandler();
		Hello helloProxy = (Hello)loggingHandler.bind(new HelloSpeaker());
		helloProxy.hello("Justin");
	}
}
</code></pre>

    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%AF%BB%E4%B9%A6/2014/08/20/linxinliang_class_loader.html">林信良Java学习笔记－类加载器</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#读书">读书</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#Java" title="Java">Java </a>
      
      
      | 发表时间: Aug 20, 2014
      </p>
    </header>

    <article class="post-content">
      <p>类加载器的实际职责就是载入.class文档, JDK本身有默认的类加载器, 也可以建立自己的类加载器加入现有的加载器层级。</p>

<p>在文本模式下执行“java ***”指令后, java执行程序会尝试寻找JRE安装目录, 然后寻找JVM, 接着启动JVM并进行初始化动作, 然后产生Bootstrap Loader, Bootstrap Loader会产生Extended Loader, 并将Extended Loader的父加载器设为Bootstrap Loader, 接着Bootstrap Loader会产生System Loader, 并将System Loader的父加载器设为Extended Loader。</p>

<p>Bootstrap Loader通常由C编写; Extended Loader通常由Java编写, 如果是Oracle/Sun JDK, 实际上是对应于sun.misc.Lancher.ExtClassLoader; System Loader是由Java编写, 是加上对应于sun.misc.Launcher.AppClassLoader。</p>

<ul>
  <li>
    <p>Bootstrap类加载器-JRE/lib/rt.jar, Bootstrap类加载器负责加载rt.jar中的JDK类文件，它是所有类加载器的父加载器。Bootstrap类加载器没有任何父类加载器, 如果你调用String.class.getClassLoader(), 会返回null, 任何基于此的代码会抛出NUllPointerException异常。Bootstrap加载器被称为初始类加载器。</p>
  </li>
  <li>
    <p>Extension类加载器-JRE/lib/ext或者java.ext.dirs指向的目录, Extension将加载类的请求先委托给它的父加载器，也就是Bootstrap, 如果没有成功加载的话，再从jre/lib/ext目录下或者java.ext.dirs系统属性定义的目录下加载类。Extension加载器由sun.misc.Launcher$ExtClassLoader实现。</p>
  </li>
  <li>
    <p>Application类加载器-CLASSPATH环境变量, 由-classpath或-cp选项定义, 或者是JAR中的Manifest的classpath属性定义.System类加载器(又叫作Application类加载器)了.它负责从classpath环境变量中加载某些应用相关的类, classpath环境变量通常由-classpath或-cp命令行选项来定义, 或者是JAR中的Manifest的classpath属性. Application类加载器是Extension类加载器的子加载器. 通过sun.misc.Launcher$AppClassLoader实现.</p>
  </li>
</ul>

<p>ClassLoader可以使用loadClass()方法加载类, 使用loadClass()方法加载类时, 默认不会执行静态区块, 真正使用类建立实例时才会执行静态区块。</p>

<p>Java真正需要某个类时才会加载对应的.class文档，而非在程序启动就加载所有类. Bootstrap Loader,Extended Loader,System Loader在程序启动后，就无法再改变它们的搜索路径，如果在程序运行过程中，打算动态决定从其他路径加载类，就要产生新的类加载器，新的类加载器建立后，父加载器建立后，父加载器会设为System Loader.</p>


    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%AF%BB%E4%B9%A6/2014/08/19/lin_object_oriented.html">林信良Java学习笔记－面向对象</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#读书">读书</a>&nbsp;
      
      
      | 标签:
      
      <a href="/tags/#Java" title="Java">Java </a>
      
      
      | 发表时间: Aug 19, 2014
      </p>
    </header>

    <article class="post-content">
      <p>private成员会被继承,只不过子类无法直接存取, 必须通过父类提供的方法来存取(如果父类愿意提供方法的话)。</p>

<p>protected关键字，类内部和相同包类可以存取，非子类的不同包类不可存取。</p>

<p>无关键字，类内部和相同包类可以存取，不同包类不可存取。</p>

<p>如果对象成员被声明为final, 但没有明确使用=指定值,那表示延迟对象成员值的指定, 在构造函数执行流程中, 一定要有对该数据成员指定值的动作, 否则编译错误.</p>

<p>如果子类中没有指定执行父类中哪个构造函数,默认会调用父类中无参数构造函数。如果向执行父类中某构造函数，可以调用super方法.</p>

<p>无法通过变量参考的对象，就是GC认定的垃圾对象。</p>

<p>如果class前使用了final关键字，表明该类是不可以被继承的。同理，如果方法前有final修饰，表明该方法是不可被重定义的。</p>

<p>多态指的是用单一接口操作多种类型对象。</p>

<p>如果方法中没有任何程序代码操作，可以使用abstract标示该方法为抽象方法，该方法不用撰写{}区块，直接”:”结束即可。</p>


    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E7%BC%96%E7%A8%8B/2014/08/12/a_way_to_solve_dead_lock_problem.html">一种进程死锁场景及解决方案</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#编程">编程</a>&nbsp;
      
      
      | 发表时间: Aug 12, 2014
      </p>
    </header>

    <article class="post-content">
      <p>在网络服务器使用进程池模式来响应客户请求时，多个进程在监听同一描述字时调用了accept。但是system V内核以库函数形式实现accept函数，并非原子操作，如果我们仍然用多个进程同时accpt套接字描述符的话，某个子进程的accept就会返回EPROTO错误，表示协议错。解决问题的方法是在应用进程调用accpt前后设置某种形式的锁（lock），这样每次只有一个子进程阻塞在accpt调用，其他进程则阻塞在试图获取锁权限上。</p>

<p>我们在设计ARE进程管理框架时同样使用了进程池模式，也使用了信号量方式用来保证accept操作的原子性。但是实际运行以后经常会出现无法响应客户请求的情况。经排查后发现，问题出现在信号处理函数上。</p>

<pre><code>ppm_sig_handler_install(SIGHUP, worker_suicide);
ppm_sig_handler_install(SIGTERM, worker_suicide);
</code></pre>

<p>worker_suicide为信号处理函数，接收到SIGHUP和SIGTERM信号后，终止子进程。但是进程终止后却没有释放信号量。于是其他的子进程一直阻塞在等待获取信号量上。</p>

<p>解决方案非常简单，在信号处理函数worker_suicide中添加锁释放代码。</p>

<pre><code>struct sembuf sop;
sop.sem_op=1;
sop.semflg=0;
semop(mutex_id, &amp;sop, 1);
</code></pre>

    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 class="post-title">
        <a class="post-link" href="/%E8%AF%BB%E4%B9%A6/2014/08/10/review_of_my_war_experience.html">我的战争回忆（选译）</a>
      </h1>
      <p class="post-meta">
      目录:
      
      <a href="/categories/#读书">读书</a>&nbsp;
      
      
      | 发表时间: Aug 10, 2014
      </p>
    </header>

    <article class="post-content">
      <p>列日之战后，德军在东线也取得了一系列的胜利。得益于大胆的计划和果决的行动，在俄军数量远远超过德奥联军情况下，胜利的天平最终还是偏向了我们。这场战争对指挥官和士兵而言都是个巨大的挑战，但是他们的卓越表现最终获得了回报，战争的成果也足以名列军史。1916年8月19日以后，冯.兴登堡元帅和我又发起了一系列的攻势，战争的残酷程度远超以往。由于德国正在同整个世界作战，兵力和盟友又处于弱势，我们做出了很多艰难的决定，按照当时的情境和我们的信念，这些决定是站得住脚的。战斗方式与过往的战争并无区别，只是军队数量和装备性能提升了。真正值得一提的是战争的规模和范围，整个国家的人口正在使用全部的资源来支撑他们的军队作战。这种场面仅仅在普法战争（1870－1871）期间的法国曾出现过。在战争中，军队和平民就是一个整体，根本没法割裂开来。也正因为如此，关于这场战争的定义在字面上无限扩展，成为了世界大战。彼时彼刻，世界上最强大的国家们注意力高度集中，军队在漫长的边境和广袤的海洋厮杀，平民间道德和舆论力量也在不断攻击和分化。如果拥有足够数量的军队的话，发动和赢得战争并不困难。但是在战争的头三年里，元帅和我从未如此幸运。在已有的条件下，我们竭尽所能，凭借信念和经验，去争取战争的胜利，我们的努力最终也获得了胜利女神的青睐（指东线战事结束）。1918年3月份，我们集中了优势兵力发起进攻（西线），胜利指日可待。但不幸的是，敌人的力量也变得更加强大，最终我们的希望都化成了泡影。第一次世界大战给德国造成了巨大的压力，如果我们要赢得胜利，每个公民都必须做到极致，为工作和战斗流尽最后一滴血汗。同时又需要对胜利抱有信心，这很困难却又是必要的。就像橡树离不开土壤一样，我们的陆军和海军也需要祖国的支持，来获取力量和勇气。对于军需物资，盟友和占领地能够提供一部分，而更关键的士气和情感支持，却必须由国内来提供。有了这些，士兵们才能前赴后继、奋力拼杀。如果得不到补充，我们的处境就很危险了。随着战争持续的时间越来越长，士气和物资的补充变得越发困难，军队面临的形势也会更加严峻。</p>

<p>英文原文： The coup de main at Liege was the first of the series of German victories. The decision was a bold one, and its execution extremely daring. The campaigns of 1914, 1915 and the summer of 1916 in the East were tremendous achievements, equal to the greatest military feats of any age. They made the highest demands on both commanders and troops. The Russians were then greatly superior in numbers to the allied German and Austro-Hungarian armies opposed to them. But, indeed, the operations which Field-Marshal von Hindenburg and I had to conduct from the 19th August, 1916, the day we assumed supreme command, rand among the most formidable in history. Nothing more awe-inspiring and destructive has ever been seen on earth. Germany, inferior in numbers and with weak allies, was contending against the world. Decisions of the utmost gravity had to be taken. They were the inevitable and logical results of the situation, our general conception of war, and the particular circumstance of this war. The armies and fleets fought as they had fought in days past, even though numbers and equipment were mightier than ever before. What made this war different from all others was the manner in which the home population supported and reinforced their armed forces with all the resources at thier disposal. Only in France, in 1870-71, had anything of the kind been seen before. In this war it was impossible to distinguish where sphere of the Army and Navy began and that of the people ended. Army and people were one. The world witnessed the war of Nations in the most literal sense of the word. In this mighty concentration of effort the Great Powers of the earth faced each other. And not only between the armed forces did the combat rage along those huge fronts and on distant oceans. The moral and vital force of the civil population was assailed with the purpose of corroding and paralysing them. With big battalions it is neither difficult nor very risky to wage war and fight battles. But in the first three years of the war the Field-Marshal and I never found ourselves in that enviable position. We could but act as duty and conscience dictated, and adopt the measures we deemed necessary to secure victory. During this period success crowned our efforts. When, in March, 1918, we attacked with the balance of numbers more in our facour than had previously been the case, our strength sufficed to win great victories, but not to bring about a rapid decision. Then it dwindled, while the enemy grew stronger. II The world-wide war of nations made enormous demands on us Germans, on whom its whole overwhelming burden fell. Every individual had to give his very utmost, if we were to win. We had literally to fight and work to the last drop of blood and sweat, and yet maintain our fighting spirit and, above all, our confidence in victory: a hard but imperative necessity, in spite of the dearth of food which the enemy imposed on us, and the onslaught of his propaganda, which was of amazing force, if unobtrusive. Our Army and Navy are rooted in the Nation, as is the oak in German soil. They live upon the homeland, and from it they draw their strength. They can keep, but cannot produce, what they need, and can only fight with the moral, material and physical means which the country provides. These means make possible victory, faithful devotion and unselfish self-sacrifice in the daily battle and the miseries of war. They alone could secure Germany’s final success. With them our country waged the titanic conflict against the world, even allowing for the assistance of our Allies and the exploitation of occupied territories as far as the laws of land warfare permitted. They Army and Navy had thus to look to the homeland for their constant renewal and rejuvenation in moral, numbers and equipment. It was essential to maintain the moral and war spirit of those at home at highest pitch. Woe to us if they should fail! The longer the war lasted, the greater grew the danger of this, the harder it became to overcome difficulties, and the more imperious were the demands of the Army and Navy for spiritual and moral reinforcement.</p>

    </article> <hr />
    
    
  
  </div>
</div>

    <section class="pager">
  
  
  <li class="previous"><a href="/page5/" title="后一页">&larr; 后一页</a></li>
  
  
  
  <li class="next"><a href="/page7/" title="前一页">前一页 &rarr;</a></li>
  
</section>


  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>关于我</h4>
  <img title="Lijia YU" src="https://i.imgur.com/Mdc4szJl.jpg" alt="Lijia YU"/>
  <span>Hi,我是邹政华，欢迎访问我的博客。</span>
  <br />

  



  

</div>

<div class="sidebar-module">
  <h4>近期文章</h4>
  
  <li>
  <a href="/%E8%A1%8C%E4%B8%9A/2016/07/13/Benchmarking_netflix_dynomite.html" title="Netlix Dynomite性能基准测试，基于AWS和Redis" rel="bookmark">Netlix Dynomite性能基准测试，基于AWS和Redis</a>
  </li>
  
  <li>
  <a href="/%E8%A1%8C%E4%B8%9A/2016/06/21/Build_your_own_offshore_develop_team.html" title="为什么应该租赁而不是创建离岸团队" rel="bookmark">为什么应该租赁而不是创建离岸团队</a>
  </li>
  
  <li>
  <a href="/%E8%A1%8C%E4%B8%9A/2016/05/07/oracle_openjdk_cleanup_of_unsafe_class.html" title="Java 9发布在即, Oracle着手清理Unsafe类" rel="bookmark">Java 9发布在即, Oracle着手清理Unsafe类</a>
  </li>
  
  <li>
  <a href="/%E8%AF%BB%E4%B9%A6/2016/02/20/well_grounded_java_developer.html" title="Java程序员修炼之道－性能调优" rel="bookmark">Java程序员修炼之道－性能调优</a>
  </li>
  
  <li>
  <a href="/%E8%AF%BB%E4%B9%A6/2016/02/09/india_and_india_sea.html" title="张文木－印度与印度洋" rel="bookmark">张文木－印度与印度洋</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>分类目录</h4>
  
  <li><a href="/categories/#读书" title="读书" rel="36">读书 (36)</a></li>
  
  <li><a href="/categories/#行业" title="行业" rel="4">行业 (4)</a></li>
  
  <li><a href="/categories/#总结与遐想" title="总结与遐想" rel="9">总结与遐想 (9)</a></li>
  
  <li><a href="/categories/#编程" title="编程" rel="10">编程 (10)</a></li>
  
</div>


<div class="sidebar-module">
  <h4>存档</h4>

  
  
  
  
  
  <li id="2016" > <a href="/archives/#2016">2016</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2015" > <a href="/archives/#2015">2015</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2014" > <a href="/archives/#2014">2014</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2013" > <a href="/archives/#2013">2013</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2012" > <a href="/archives/#2012">2012</a></li>
  
  
  
  
  
  
  
  

</div>


</div>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">学习笔记</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> 
  on 
  
  <a href="https://github.com/">Github</a>
  
  | Theme <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Design by <a href="http://yulijia.net">Lijia Yu</a>  

</footer>


</div>

</body>

</html>
